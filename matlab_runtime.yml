- name: Install Matlab Runtime
  hosts:
    - localhost
  gather_facts: false
  tasks:
    - name: Download matlab runtime
      get_url:
        url: https://ssd.mathworks.com/supportfiles/downloads/R2021a/Release/6/deployment_files/installer/complete/glnxa64/MATLAB_Runtime_R2021a_Update_6_glnxa64.zip
        dest: ~/data/volume_2
        mode: 0550

    - name: Install zip
      become: yes
      apt-get:
        name: "{{ packages }}"
        allow_unauthenticated: true
      vars:
        packages:
          - zip

    - name: Unzip the file
      shell: unzip ~/data/volume_2/MATLAB_Runtime_R2021a_Update_6_glnxa64.zip -d ~/data/volume_2/MATLAB_Runtime

    - name: Install matlab runtime
      become: Yes
      command: ./install -mode silent -agreeToLicense yes
      args:
        chdir: /data/volume_2/MATLAB_Runtime/